import{_ as s}from"./plugin-vue_export-helper-c27b6911.js";import{o as n,c as a,a as l}from"./app-fd217ae5.js";const p={},e=l(`<h2 id="底部导航栏" tabindex="-1"><a class="header-anchor" href="#底部导航栏" aria-hidden="true">#</a> 底部导航栏</h2><ol><li>在<code>main.dart</code>中<code>MyApp</code>返回的<code>MaterialApp</code>中引入一个即将编写的底部导航控件</li></ol><div class="language-dart line-numbers-mode" data-ext="dart"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;bottom_navigation_widget.dart&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">...</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">MaterialApp</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">     ...</span></span>
<span class="line"><span style="color:#ABB2BF;">      home</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">BottomNavigationWidget</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">    );</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>编写多个导航准备切换后的页面<code>/lib/pages/xxx.dart</code></li></ol><div class="language-dart line-numbers-mode" data-ext="dart"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;package:flutter/material.dart&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">class</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">HomeScreen</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">extends</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">StatelessWidget</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">@override</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E5C07B;">Widget</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">build</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">BuildContext</span><span style="color:#ABB2BF;"> context) {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Scaffold</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">      appBar</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">AppBar</span><span style="color:#ABB2BF;">(title</span><span style="color:#C678DD;">:</span><span style="color:#E5C07B;">Text</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;home&#39;</span><span style="color:#ABB2BF;">)),</span></span>
<span class="line"><span style="color:#ABB2BF;">      body</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Center</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">       child</span><span style="color:#C678DD;">:</span><span style="color:#E5C07B;">Text</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;this is the homePage&#39;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">     ),</span></span>
<span class="line"><span style="color:#ABB2BF;">    );</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>编写底部导航控件<code>/lib/bottom_navigation_widget.dart</code></li></ol><div class="language-dart line-numbers-mode" data-ext="dart"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;package:flutter/material.dart&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;pages/home_screen.dart&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">class</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">BottomNavigationWidget</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">extends</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">StatefulWidget</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E5C07B;">_BottomNavigationWidgetState</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">createState</span><span style="color:#ABB2BF;">() =&gt; </span><span style="color:#E5C07B;">_BottomNavigationWidgetState</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">class</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">_BottomNavigationWidgetState</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">extends</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">State</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">BottomNavigationWidget</span><span style="color:#ABB2BF;">&gt; {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">final</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">_BottomNavigationColor</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Colors</span><span style="color:#ABB2BF;">.blue;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E5C07B;">int</span><span style="color:#ABB2BF;"> _currentIndex </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E5C07B;">List</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">Widget</span><span style="color:#ABB2BF;">&gt; screenList </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">List</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">@override</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">void</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">initState</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">     screenList</span></span>
<span class="line"><span style="color:#ABB2BF;">       ..</span><span style="color:#61AFEF;">add</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">HomeScreen</span><span style="color:#ABB2BF;">())</span></span>
<span class="line"><span style="color:#ABB2BF;">       ..</span><span style="color:#61AFEF;">add</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">StationScreen</span><span style="color:#ABB2BF;">())</span></span>
<span class="line"><span style="color:#ABB2BF;">       ...;</span></span>
<span class="line"><span style="color:#ABB2BF;">     </span><span style="color:#E5C07B;">super</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">initState</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">@override</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E5C07B;">Widget</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">build</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">BuildContext</span><span style="color:#ABB2BF;"> context) {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Scaffold</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">     body</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> screenList[_currentIndex],</span></span>
<span class="line"><span style="color:#ABB2BF;">     bottomNavigationBar</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">BottomNavigationBar</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">        items</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;">[</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E5C07B;">BottomNavigationBarItem</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">            icon</span><span style="color:#C678DD;">:</span><span style="color:#E5C07B;">Icon</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">              </span><span style="color:#E5C07B;">Icons</span><span style="color:#ABB2BF;">.home,</span></span>
<span class="line"><span style="color:#ABB2BF;">              color</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">_BottomNavigationColor</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">             ),</span></span>
<span class="line"><span style="color:#ABB2BF;">             title</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Text</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">               </span><span style="color:#98C379;">&#39;首页&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">               style</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">TextStyle</span><span style="color:#ABB2BF;">(color</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">_BottomNavigationColor</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#ABB2BF;">             )</span></span>
<span class="line"><span style="color:#ABB2BF;">           ),</span></span>
<span class="line"><span style="color:#ABB2BF;">           ...</span></span>
<span class="line"><span style="color:#ABB2BF;">        ],</span></span>
<span class="line"><span style="color:#ABB2BF;">        currentIndex</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> _currentIndex,</span></span>
<span class="line"><span style="color:#ABB2BF;">        onTap</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">int</span><span style="color:#ABB2BF;"> index){</span></span>
<span class="line"><span style="color:#ABB2BF;">           </span><span style="color:#61AFEF;">setState</span><span style="color:#ABB2BF;">(() {</span></span>
<span class="line"><span style="color:#ABB2BF;">              _currentIndex </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> index;</span></span>
<span class="line"><span style="color:#ABB2BF;">           });</span></span>
<span class="line"><span style="color:#ABB2BF;">         },</span></span>
<span class="line"><span style="color:#ABB2BF;">     ),</span></span>
<span class="line"><span style="color:#ABB2BF;">  );</span></span>
<span class="line"><span style="color:#ABB2BF;"> }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>StatefulWidget</code>具有可变化状态(<code>state</code>)的窗口组件，使用这个要根据变化状态调整<code>state</code>值<br> 使用<code>StatefulWidget</code>分为两个部分，第一个部分是继承于<code>StatefullWidget</code>，第二个部分是继承于<code>State</code>，这部分的<code>State</code>才是重点，主要代码都会写在<code>State</code>中<br> 我们需要重写<code>initState()</code>方法，把已做好的切换页面进行初始化到一个<code>Widget</code>数组中，有了数组就可以根据数组的索引来切换不同的页面了 <code>..add()</code>是<code>Dart</code>语言的<code>..</code>语法，返回调用者本身 <code>BottomNavigationBar</code>组件里提供了一个<code>onTap</code>响应事件，这个事件自带一个索引值<code>index</code>，通过索引值我们就可以让我们<code>list</code>里的索引相对应了</p><h2 id="不规则底部工具栏" tabindex="-1"><a class="header-anchor" href="#不规则底部工具栏" aria-hidden="true">#</a> 不规则底部工具栏</h2><ol><li>在新建的<code>myBottomNavigationWidget.dart</code>中</li></ol><div class="language-dart line-numbers-mode" data-ext="dart"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;package:flutter/material.dart&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;each_view.dart&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">class</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">MyBottomNavigationWidget</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">extends</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">StatefulWidget</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">_MyBottomNavigationWidgetState</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">createState</span><span style="color:#ABB2BF;">() =&gt; </span><span style="color:#E5C07B;">_MyBottomNavigationWidgetState</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#C678DD;">class</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">_MyBottomNavigationWidgetState</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">extends</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">State</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">MyBottomNavigationWidget</span><span style="color:#ABB2BF;">&gt; {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E5C07B;">List</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">Widget</span><span style="color:#ABB2BF;">&gt; _eachView;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E5C07B;">int</span><span style="color:#ABB2BF;"> _index </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">@override</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">void</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">initState</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">      _eachView </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">List</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">      _eachView..</span><span style="color:#61AFEF;">add</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">EachView</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;home&#39;</span><span style="color:#ABB2BF;">))..</span><span style="color:#61AFEF;">add</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">EachView</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;Message&#39;</span><span style="color:#ABB2BF;">));</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E5C07B;">super</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">initState</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">@override</span></span>
<span class="line"><span style="color:#ABB2BF;">   </span><span style="color:#E5C07B;">Widget</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">build</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">BuildContext</span><span style="color:#ABB2BF;"> context) {</span></span>
<span class="line"><span style="color:#ABB2BF;">   </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Scaffold</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">     floatingActionButton</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">FloatingActionButton</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">         child</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Icon</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">             </span><span style="color:#E5C07B;">Icons</span><span style="color:#ABB2BF;">.adjust,</span></span>
<span class="line"><span style="color:#ABB2BF;">             color</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Colors</span><span style="color:#ABB2BF;">.white</span></span>
<span class="line"><span style="color:#ABB2BF;">          ),</span></span>
<span class="line"><span style="color:#ABB2BF;">          tooltip</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;Tips&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">          onPressed</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> (){</span></span>
<span class="line"><span style="color:#ABB2BF;">               </span><span style="color:#E5C07B;">Navigator</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">of</span><span style="color:#ABB2BF;">(context).</span><span style="color:#61AFEF;">push</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">MaterialPageRoute</span><span style="color:#ABB2BF;">(builder</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">BuildContext</span><span style="color:#ABB2BF;"> context){</span></span>
<span class="line"><span style="color:#ABB2BF;">                     </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">EachView</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;New Page&#39;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">               }));</span></span>
<span class="line"><span style="color:#ABB2BF;">          },</span></span>
<span class="line"><span style="color:#ABB2BF;">     ),</span></span>
<span class="line"><span style="color:#ABB2BF;">   floatingActionButtonLocation</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">FloatingActionButtonLocation</span><span style="color:#ABB2BF;">.centerDocked,</span></span>
<span class="line"><span style="color:#ABB2BF;">   bottomNavigationBar</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">BottomAppBar</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">       color</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Colors</span><span style="color:#ABB2BF;">.lightBlue,</span></span>
<span class="line"><span style="color:#ABB2BF;">       shape</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">CircularNotchedRectangle</span><span style="color:#ABB2BF;">(),</span></span>
<span class="line"><span style="color:#ABB2BF;">      child</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Row</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">           mainAxisSize</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">MainAxisSize</span><span style="color:#ABB2BF;">.max,</span></span>
<span class="line"><span style="color:#ABB2BF;">           mainAxisAlignment</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">MainAxisAlignment</span><span style="color:#ABB2BF;">.spaceAround,</span></span>
<span class="line"><span style="color:#ABB2BF;">          children</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">&lt;</span><span style="color:#E5C07B;">Widget</span><span style="color:#56B6C2;">&gt;</span><span style="color:#ABB2BF;">[</span></span>
<span class="line"><span style="color:#ABB2BF;">              </span><span style="color:#E5C07B;">IconButton</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">                 icon</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Icon</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Icons</span><span style="color:#ABB2BF;">.home),</span></span>
<span class="line"><span style="color:#ABB2BF;">                 color</span><span style="color:#C678DD;">:</span><span style="color:#E5C07B;">Colors</span><span style="color:#ABB2BF;">.white,</span></span>
<span class="line"><span style="color:#ABB2BF;">                 onPressed</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> (){</span></span>
<span class="line"><span style="color:#ABB2BF;">                    </span><span style="color:#61AFEF;">setState</span><span style="color:#ABB2BF;">(() {</span></span>
<span class="line"><span style="color:#ABB2BF;">                        _index </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">                    });</span></span>
<span class="line"><span style="color:#ABB2BF;">                 },</span></span>
<span class="line"><span style="color:#ABB2BF;">               ),</span></span>
<span class="line"><span style="color:#ABB2BF;">             </span><span style="color:#E5C07B;">IconButton</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">                  icon</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Icon</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Icons</span><span style="color:#ABB2BF;">.message),</span></span>
<span class="line"><span style="color:#ABB2BF;">                 color</span><span style="color:#C678DD;">:</span><span style="color:#E5C07B;">Colors</span><span style="color:#ABB2BF;">.white,</span></span>
<span class="line"><span style="color:#ABB2BF;">                 onPressed</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> (){</span></span>
<span class="line"><span style="color:#ABB2BF;">                     </span><span style="color:#61AFEF;">setState</span><span style="color:#ABB2BF;">(() {</span></span>
<span class="line"><span style="color:#ABB2BF;">                        _index </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">                     });</span></span>
<span class="line"><span style="color:#ABB2BF;">                  },</span></span>
<span class="line"><span style="color:#ABB2BF;">             )</span></span>
<span class="line"><span style="color:#ABB2BF;">         ],</span></span>
<span class="line"><span style="color:#ABB2BF;">      ),</span></span>
<span class="line"><span style="color:#ABB2BF;">   ),</span></span>
<span class="line"><span style="color:#ABB2BF;">   body</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;">_eachView[_index]</span></span>
<span class="line"><span style="color:#ABB2BF;">  );</span></span>
<span class="line"><span style="color:#ABB2BF;"> }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>floatingActionButton 可交互的浮动按钮</p><ul><li><code>child</code>里一般放置<code>Icon</code></li><li><code>tooltip</code>长按显示的提示文字</li><li><code>onPressed</code>点击事件</li><li><code>floatingActionButtonLocation</code>让浮动按钮和底栏进行融合</li><li><code>BottomAppBar</code>底部工具栏，比<code>BottomNavigationBar</code>灵活很多，可以放置文字和图标，也可以放置容器</li><li><code>color</code>属性，底部工具栏的颜色</li><li><code>shape</code>设置底栏的形状，一般使用这个都是为了和<code>floatingActionButton</code>融合，所以使用的值一般都是<code>CircularNotchedRectangle()</code>，有缺口的圆形矩形</li><li><code>child</code>里可以放置大部分<code>Widget</code></li></ul><ol start="2"><li>切换的页面，在<code>each_view.dart</code>中</li></ol><div class="language-dart line-numbers-mode" data-ext="dart"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;package:flutter/material.dart&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">class</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">EachView</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">extends</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">StatefulWidget</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;"> _title;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E5C07B;">EachView</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">._title);</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E5C07B;">_EachViewState</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">createState</span><span style="color:#ABB2BF;">() =&gt; </span><span style="color:#E5C07B;">_EachViewState</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#C678DD;">class</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">_EachViewState</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">extends</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">State</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">EachView</span><span style="color:#ABB2BF;">&gt; {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">@override</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E5C07B;">Widget</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">build</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">BuildContext</span><span style="color:#ABB2BF;"> context) {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Scaffold</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">       appBar</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">AppBar</span><span style="color:#ABB2BF;">(title</span><span style="color:#C678DD;">:</span><span style="color:#E5C07B;">Text</span><span style="color:#ABB2BF;">(widget._title)),</span></span>
<span class="line"><span style="color:#ABB2BF;">        body</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Center</span><span style="color:#ABB2BF;">(child</span><span style="color:#C678DD;">:</span><span style="color:#E5C07B;">Text</span><span style="color:#ABB2BF;">(widget._title))</span></span>
<span class="line"><span style="color:#ABB2BF;">    );</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="毛玻璃效果" tabindex="-1"><a class="header-anchor" href="#毛玻璃效果" aria-hidden="true">#</a> 毛玻璃效果</h2><div class="language-dart line-numbers-mode" data-ext="dart"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#E5C07B;">Stack</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">  children</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">&lt;</span><span style="color:#E5C07B;">Widget</span><span style="color:#56B6C2;">&gt;</span><span style="color:#ABB2BF;">[</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">ConstrainedBox</span><span style="color:#ABB2BF;">( </span><span style="color:#7F848E;font-style:italic;">// 约束盒子组件，添加额外的限制条件到child上</span></span>
<span class="line"><span style="color:#ABB2BF;">       constraints</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">BoxConstraints</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">expand</span><span style="color:#ABB2BF;">(), </span><span style="color:#7F848E;font-style:italic;">// 限制条件 可扩展的</span></span>
<span class="line"><span style="color:#ABB2BF;">       child</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Image</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">network</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;xx&#39;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">    ),</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">Center</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">       child</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">ClipRect</span><span style="color:#ABB2BF;">( </span><span style="color:#7F848E;font-style:italic;">// 裁切长方形</span></span>
<span class="line"><span style="color:#ABB2BF;">           child</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">BackdropFilter</span><span style="color:#ABB2BF;">( </span><span style="color:#7F848E;font-style:italic;">// 背景滤镜器</span></span>
<span class="line"><span style="color:#ABB2BF;">               filter</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">ImageFilter</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">blur</span><span style="color:#ABB2BF;">(sigmaX</span><span style="color:#C678DD;">:</span><span style="color:#D19A66;">5.0</span><span style="color:#ABB2BF;">,sigmaY</span><span style="color:#C678DD;">:</span><span style="color:#D19A66;">5.0</span><span style="color:#ABB2BF;">), </span><span style="color:#7F848E;font-style:italic;">// 图片模糊过滤，横向纵向都设置5.0</span></span>
<span class="line"><span style="color:#ABB2BF;">               child</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Opacity</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">                   opacity</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">0.5</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">                   child</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Container</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">                       width</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">500.0</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">                       height</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">100.0</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">                       decoration</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">BoxDecoration</span><span style="color:#ABB2BF;">(color</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Colors</span><span style="color:#ABB2BF;">.grey.shade200),</span></span>
<span class="line"><span style="color:#ABB2BF;">                       child</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Center</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">                           child</span><span style="color:#C678DD;">:</span><span style="color:#E5C07B;">Text</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">                               </span><span style="color:#98C379;">&#39;AAAAss&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">                               style</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Theme</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">of</span><span style="color:#ABB2BF;">(context).textTheme.display3,</span></span>
<span class="line"><span style="color:#ABB2BF;">                           ),</span></span>
<span class="line"><span style="color:#ABB2BF;">                       ),</span></span>
<span class="line"><span style="color:#ABB2BF;">                   ),</span></span>
<span class="line"><span style="color:#ABB2BF;">                ),</span></span>
<span class="line"><span style="color:#ABB2BF;">             ),</span></span>
<span class="line"><span style="color:#ABB2BF;">         ),</span></span>
<span class="line"><span style="color:#ABB2BF;">      )</span></span>
<span class="line"><span style="color:#ABB2BF;">   ],</span></span>
<span class="line"><span style="color:#ABB2BF;">),</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="顶部切换" tabindex="-1"><a class="header-anchor" href="#顶部切换" aria-hidden="true">#</a> 顶部切换</h2><p><code>SingleTickerProviderStateMixin</code>主要是我们初始化<code>TabController</code>时需要用到<code>vsync</code>，垂直属性然后传递<code>this</code></p><div class="language-dart line-numbers-mode" data-ext="dart"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;package:flutter/material.dart&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;keep_alive.dart&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">class</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">MyHomePage</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">extends</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">StatefulWidget</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">   </span><span style="color:#E5C07B;">_MyHomePageState</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">createState</span><span style="color:#ABB2BF;">() =&gt; </span><span style="color:#E5C07B;">_MyHomePageState</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#C678DD;">class</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">_MyHomePageState</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">extends</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">State</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">MyHomePage</span><span style="color:#ABB2BF;">&gt; </span><span style="color:#C678DD;">with</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">SingleTickerProviderStateMixin</span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E5C07B;">TabController</span><span style="color:#ABB2BF;"> _controller;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">@override</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">void</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">initState</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">super</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">initState</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">    _controller </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">TabController</span><span style="color:#ABB2BF;">(length</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">3</span><span style="color:#ABB2BF;">,vsync</span><span style="color:#C678DD;">:</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//重写被释放的方法，只释放TabController</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">@override</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">void</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">dispose</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">     _controller.</span><span style="color:#61AFEF;">dispose</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">     </span><span style="color:#E5C07B;">super</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">dispose</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">@override</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E5C07B;">Widget</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">build</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">BuildContext</span><span style="color:#ABB2BF;"> context) {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Scaffold</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">       appBar</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">AppBar</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">       title</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Text</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;Choose way&#39;</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#ABB2BF;">       bottom</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">TabBar</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">           controller</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> _controller,</span></span>
<span class="line"><span style="color:#ABB2BF;">           tabs</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">&lt;</span><span style="color:#E5C07B;">Widget</span><span style="color:#56B6C2;">&gt;</span><span style="color:#ABB2BF;">[</span></span>
<span class="line"><span style="color:#ABB2BF;">              </span><span style="color:#E5C07B;">Tab</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">                 icon</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Icon</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Icons</span><span style="color:#ABB2BF;">.directions_car),</span></span>
<span class="line"><span style="color:#ABB2BF;">              ),</span></span>
<span class="line"><span style="color:#ABB2BF;">              </span><span style="color:#E5C07B;">Tab</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">                 icon</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Icon</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Icons</span><span style="color:#ABB2BF;">.directions_bus),</span></span>
<span class="line"><span style="color:#ABB2BF;">              ),</span></span>
<span class="line"><span style="color:#ABB2BF;">              </span><span style="color:#E5C07B;">Tab</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">                 icon</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Icon</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Icons</span><span style="color:#ABB2BF;">.directions_bike),</span></span>
<span class="line"><span style="color:#ABB2BF;">              )</span></span>
<span class="line"><span style="color:#ABB2BF;">           ],</span></span>
<span class="line"><span style="color:#ABB2BF;">        ),</span></span>
<span class="line"><span style="color:#ABB2BF;">      ),</span></span>
<span class="line"><span style="color:#ABB2BF;">      body</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">TabBarView</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">         controller</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> _controller,</span></span>
<span class="line"><span style="color:#ABB2BF;">         children</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">&lt;</span><span style="color:#E5C07B;">Widget</span><span style="color:#56B6C2;">&gt;</span><span style="color:#ABB2BF;">[</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#61AFEF;">keepAliveBtn</span><span style="color:#ABB2BF;">(),</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#61AFEF;">keepAliveBtn</span><span style="color:#ABB2BF;">(),</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#61AFEF;">keepAliveBtn</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">         ],</span></span>
<span class="line"><span style="color:#ABB2BF;">      ),</span></span>
<span class="line"><span style="color:#ABB2BF;">    );</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="保持状态" tabindex="-1"><a class="header-anchor" href="#保持状态" aria-hidden="true">#</a> 保持状态</h2><p>混入<code>AutomaticKeepAliveClientMixin</code>是保持状态的关键，然后重写<code>wantKeepAlive</code>的值为<code>true</code></p><div class="language-dart line-numbers-mode" data-ext="dart"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;package:flutter/material.dart&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">class</span><span style="color:#ABB2BF;"> keepAliveBtn </span><span style="color:#C678DD;">extends</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">StatefulWidget</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">  _keepAliveBtnState </span><span style="color:#61AFEF;">createState</span><span style="color:#ABB2BF;">() =&gt; </span><span style="color:#61AFEF;">_keepAliveBtnState</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#C678DD;">class</span><span style="color:#ABB2BF;"> _keepAliveBtnState </span><span style="color:#C678DD;">extends</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">State</span><span style="color:#ABB2BF;">&lt;keepAliveBtn&gt; </span><span style="color:#C678DD;">with</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">AutomaticKeepAliveClientMixin</span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E5C07B;">int</span><span style="color:#ABB2BF;"> _counter </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">@override</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E5C07B;">bool</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">get</span><span style="color:#ABB2BF;"> wantKeepAlive =&gt; </span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">void</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">_incrementCounter</span><span style="color:#ABB2BF;">(){</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">setState</span><span style="color:#ABB2BF;">(() {</span></span>
<span class="line"><span style="color:#ABB2BF;">    _counter++;</span></span>
<span class="line"><span style="color:#ABB2BF;">  });</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">@override</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E5C07B;">Widget</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">build</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">BuildContext</span><span style="color:#ABB2BF;"> context) {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Scaffold</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">      body</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Center</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">         child</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Column</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">            mainAxisAlignment</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">MainAxisAlignment</span><span style="color:#ABB2BF;">.center,</span></span>
<span class="line"><span style="color:#ABB2BF;">            children</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">&lt;</span><span style="color:#E5C07B;">Widget</span><span style="color:#56B6C2;">&gt;</span><span style="color:#ABB2BF;">[</span></span>
<span class="line"><span style="color:#ABB2BF;">               </span><span style="color:#E5C07B;">Text</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;点击添加该行程&#39;</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#ABB2BF;">               </span><span style="color:#E5C07B;">Text</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">                  </span><span style="color:#98C379;">&#39;$</span><span style="color:#E06C75;font-style:italic;">_counter</span><span style="color:#98C379;">&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">                  style</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Theme</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">of</span><span style="color:#ABB2BF;">(context).textTheme.display1,</span></span>
<span class="line"><span style="color:#ABB2BF;">               )</span></span>
<span class="line"><span style="color:#ABB2BF;">            ],</span></span>
<span class="line"><span style="color:#ABB2BF;">         ),</span></span>
<span class="line"><span style="color:#ABB2BF;">      ),</span></span>
<span class="line"><span style="color:#ABB2BF;">     floatingActionButton</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">FloatingActionButton</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">        onPressed</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> _incrementCounter,</span></span>
<span class="line"><span style="color:#ABB2BF;">        tooltip</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;Add&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">        child</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Icon</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Icons</span><span style="color:#ABB2BF;">.add),</span></span>
<span class="line"><span style="color:#ABB2BF;">     ),</span></span>
<span class="line"><span style="color:#ABB2BF;">   );</span></span>
<span class="line"><span style="color:#ABB2BF;"> }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="搜索条提示" tabindex="-1"><a class="header-anchor" href="#搜索条提示" aria-hidden="true">#</a> 搜索条提示</h2><ol><li>模拟推荐词信息数据</li></ol><div class="language-dart line-numbers-mode" data-ext="dart"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> searchList </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> [</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#98C379;">&#39;aaa&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#98C379;">&#39;aaaabbb&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#98C379;">&#39;aaaabbbbcccc&#39;</span></span>
<span class="line"><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#C678DD;">const</span><span style="color:#ABB2BF;"> recentSuggest </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> [</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#98C379;">&#39;推荐01&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#98C379;">&#39;推荐02&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#98C379;">&#39;推荐03&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">];</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>appBar</li></ol><div class="language-dart line-numbers-mode" data-ext="dart"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;package:flutter/material.dart&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;asset.dart&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">class</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">SearchBar</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">extends</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">StatefulWidget</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">   </span><span style="color:#E5C07B;">_SearchBarState</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">createState</span><span style="color:#ABB2BF;">() =&gt; </span><span style="color:#E5C07B;">_SearchBarState</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#C678DD;">class</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">_SearchBarState</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">extends</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">State</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">SearchBar</span><span style="color:#ABB2BF;">&gt; {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">@override</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E5C07B;">Widget</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">build</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">BuildContext</span><span style="color:#ABB2BF;"> context) {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Scaffold</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">      appBar</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">AppBar</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">        title</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Text</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;appBar&#39;</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#ABB2BF;">        actions</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">&lt;</span><span style="color:#E5C07B;">Widget</span><span style="color:#56B6C2;">&gt;</span><span style="color:#ABB2BF;">[</span></span>
<span class="line"><span style="color:#ABB2BF;">           </span><span style="color:#E5C07B;">IconButton</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">              icon</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Icon</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Icons</span><span style="color:#ABB2BF;">.search),</span></span>
<span class="line"><span style="color:#ABB2BF;">              onPressed</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> (){</span></span>
<span class="line"><span style="color:#ABB2BF;">                 </span><span style="color:#61AFEF;">showSearch</span><span style="color:#ABB2BF;">(context</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> context,delegate</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">searchBarDelegate</span><span style="color:#ABB2BF;">());</span></span>
<span class="line"><span style="color:#ABB2BF;">              },</span></span>
<span class="line"><span style="color:#ABB2BF;">           )</span></span>
<span class="line"><span style="color:#ABB2BF;">         ],</span></span>
<span class="line"><span style="color:#ABB2BF;">      ),</span></span>
<span class="line"><span style="color:#ABB2BF;">    );</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#C678DD;">class</span><span style="color:#ABB2BF;"> searchBarDelegate </span><span style="color:#C678DD;">extends</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">SearchDelegate</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">&gt;{</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">@override</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E5C07B;">List</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">Widget</span><span style="color:#ABB2BF;">&gt; </span><span style="color:#61AFEF;">buildActions</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">BuildContext</span><span style="color:#ABB2BF;"> context){</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> [</span></span>
<span class="line"><span style="color:#ABB2BF;">       </span><span style="color:#E5C07B;">IconButton</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">          icon</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Icon</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">Icons</span><span style="color:#ABB2BF;">.clear),</span></span>
<span class="line"><span style="color:#ABB2BF;">          onPressed</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> () =&gt; query </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">       )</span></span>
<span class="line"><span style="color:#ABB2BF;">    ];</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">@override</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E5C07B;">Widget</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">buildLeading</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">BuildContext</span><span style="color:#ABB2BF;"> context){</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">IconButton</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">       icon</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">AnimatedIcon</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">          icon</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">AnimatedIcons</span><span style="color:#ABB2BF;">.menu_arrow,</span></span>
<span class="line"><span style="color:#ABB2BF;">          progress</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> transitionAnimation,</span></span>
<span class="line"><span style="color:#ABB2BF;">       ),</span></span>
<span class="line"><span style="color:#ABB2BF;">       onPressed</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> () =&gt; </span><span style="color:#61AFEF;">close</span><span style="color:#ABB2BF;">(context,</span><span style="color:#D19A66;">null</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">    );</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">@override</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E5C07B;">Widget</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">buildResults</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">BuildContext</span><span style="color:#ABB2BF;"> context){</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Container</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">       width</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">100.0</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">       height</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">100.0</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">       child</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Card</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">         color</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Colors</span><span style="color:#ABB2BF;">.redAccent,</span></span>
<span class="line"><span style="color:#ABB2BF;">         child</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Center</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">            child</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Text</span><span style="color:#ABB2BF;">(query),</span></span>
<span class="line"><span style="color:#ABB2BF;">         ),</span></span>
<span class="line"><span style="color:#ABB2BF;">       )</span></span>
<span class="line"><span style="color:#ABB2BF;">    );</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">@override</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E5C07B;">Widget</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">buildSuggestions</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">BuildContext</span><span style="color:#ABB2BF;"> context){</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">final</span><span style="color:#ABB2BF;"> suggestionList </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> query.isEmpty </span><span style="color:#C678DD;">?</span><span style="color:#ABB2BF;"> recentSuggest </span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> searchList.</span><span style="color:#61AFEF;">where</span><span style="color:#ABB2BF;">((input) =&gt; input.</span><span style="color:#61AFEF;">startsWith</span><span style="color:#ABB2BF;">(query)).</span><span style="color:#61AFEF;">toList</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">ListView</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">builder</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">    itemCount</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> suggestionList.length,</span></span>
<span class="line"><span style="color:#ABB2BF;">    itemBuilder</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> (context,index) =&gt; </span><span style="color:#E5C07B;">ListTile</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">      title</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">RichText</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">         text</span><span style="color:#C678DD;">:</span><span style="color:#E5C07B;">TextSpan</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">            text</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> suggestionList[index].</span><span style="color:#61AFEF;">substring</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">, query.length),</span></span>
<span class="line"><span style="color:#ABB2BF;">            style</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">TextStyle</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">               color</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Colors</span><span style="color:#ABB2BF;">.black,</span></span>
<span class="line"><span style="color:#ABB2BF;">               fontWeight</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">FontWeight</span><span style="color:#ABB2BF;">.bold</span></span>
<span class="line"><span style="color:#ABB2BF;">            ),</span></span>
<span class="line"><span style="color:#ABB2BF;">            children</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> [</span></span>
<span class="line"><span style="color:#ABB2BF;">               </span><span style="color:#E5C07B;">TextSpan</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">                   text</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> suggestionList[index].</span><span style="color:#61AFEF;">substring</span><span style="color:#ABB2BF;">(query.length),</span></span>
<span class="line"><span style="color:#ABB2BF;">                   style</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">TextStyle</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">                      color</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Colors</span><span style="color:#ABB2BF;">.grey</span></span>
<span class="line"><span style="color:#ABB2BF;">                   )</span></span>
<span class="line"><span style="color:#ABB2BF;">               )</span></span>
<span class="line"><span style="color:#ABB2BF;">            ]</span></span>
<span class="line"><span style="color:#ABB2BF;">          )</span></span>
<span class="line"><span style="color:#ABB2BF;">        ),</span></span>
<span class="line"><span style="color:#ABB2BF;">      ),</span></span>
<span class="line"><span style="color:#ABB2BF;">   );</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>重写<code>buildActions</code>方法，搜索条右侧的按钮执行方法</li><li>重写<code>buildLeading</code>方法，搜索栏左侧图标的功能编写</li><li>重写<code>buildResults</code>方法，搜索到内容后的展现</li><li>重写<code>buildSuggestions</code>方法，设置推荐</li></ul><h2 id="flutter-swiper" tabindex="-1"><a class="header-anchor" href="#flutter-swiper" aria-hidden="true">#</a> flutter_swiper</h2><div class="language-dart line-numbers-mode" data-ext="dart"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;package:flutter_swiper/flutter_swiper.dart&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C678DD;">class</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">SwiperDiy</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">extends</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">StatelessWidget</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">final</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">List</span><span style="color:#ABB2BF;"> swiperDataList;</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E5C07B;">SwiperDiy</span><span style="color:#ABB2BF;">({</span><span style="color:#E5C07B;">Key</span><span style="color:#ABB2BF;"> key,</span><span style="color:#E5C07B;">this</span><span style="color:#ABB2BF;">.swiperDataList})</span><span style="color:#C678DD;">:</span><span style="color:#E5C07B;">super</span><span style="color:#ABB2BF;">(key</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;">key);</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">@override</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E5C07B;">Widget</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">build</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">BuildContext</span><span style="color:#ABB2BF;"> context) {</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Container</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">          height</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">ScreenUtil</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">setHeight</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">333</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#ABB2BF;">          width</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">ScreenUtil</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">setWidth</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">750</span><span style="color:#ABB2BF;">),</span></span>
<span class="line"><span style="color:#ABB2BF;">          child</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Swiper</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">               itemBuilder</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">BuildContext</span><span style="color:#ABB2BF;"> context,</span><span style="color:#E5C07B;">int</span><span style="color:#ABB2BF;"> index){</span></span>
<span class="line"><span style="color:#ABB2BF;">                    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Image</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">network</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;\${</span><span style="color:#E06C75;font-style:italic;">swiperDataList</span><span style="color:#98C379;">[</span><span style="color:#E06C75;font-style:italic;">index</span><span style="color:#98C379;">][&#39;image&#39;]}&#39;</span><span style="color:#ABB2BF;">,fit</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">BoxFit</span><span style="color:#ABB2BF;">.fill);</span></span>
<span class="line"><span style="color:#ABB2BF;">              },</span></span>
<span class="line"><span style="color:#ABB2BF;">               itemCount</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> swiperDataList.length,</span></span>
<span class="line"><span style="color:#ABB2BF;">               pagination</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">SwiperPagination</span><span style="color:#ABB2BF;">(),</span></span>
<span class="line"><span style="color:#ABB2BF;">              autoplay</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">        ),</span></span>
<span class="line"><span style="color:#ABB2BF;">     );</span></span>
<span class="line"><span style="color:#ABB2BF;">  }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="flutter-screenutil" tabindex="-1"><a class="header-anchor" href="#flutter-screenutil" aria-hidden="true">#</a> flutter_screenutil</h2><p>先设置一个<code>UI</code>稿的尺寸，它会根据这个尺寸，根据不同屏幕进行缩放，能满足大部分屏幕场景</p><div class="language-dart line-numbers-mode" data-ext="dart"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;package:flutter_screenutil/flutter_screenutil.dart&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;"> ...</span></span>
<span class="line"><span style="color:#E5C07B;">Widget</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">build</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">BuildContext</span><span style="color:#ABB2BF;"> context) {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E5C07B;">ScreenUtil</span><span style="color:#ABB2BF;">.instance </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">ScreenUtil</span><span style="color:#ABB2BF;">(width</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">750</span><span style="color:#ABB2BF;">, height</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">1334</span><span style="color:#ABB2BF;">)..</span><span style="color:#61AFEF;">init</span><span style="color:#ABB2BF;">(context);</span></span>
<span class="line"><span style="color:#ABB2BF;">  ...</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 使用</span></span>
<span class="line"><span style="color:#D19A66;">540.</span><span style="color:#ABB2BF;">w</span></span>
<span class="line"><span style="color:#D19A66;">200.</span><span style="color:#ABB2BF;">h</span></span>
<span class="line"><span style="color:#D19A66;">28.</span><span style="color:#ABB2BF;">sp; 配置字体大小参数2，根据系统字体大小进行缩放</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="url-launcher" tabindex="-1"><a class="header-anchor" href="#url-launcher" aria-hidden="true">#</a> url_launcher</h2><p>在移动平台中启动<code>URL</code>的插件，可以打开网页、发送短信和邮件、拨打电话</p><div class="language-dart line-numbers-mode" data-ext="dart"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#C678DD;">@override</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E5C07B;">Widget</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">build</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">BuildContext</span><span style="color:#ABB2BF;"> context) {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">void</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">_launcherUrl</span><span style="color:#ABB2BF;">() </span><span style="color:#C678DD;">async</span><span style="color:#ABB2BF;">{</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#7F848E;font-style:italic;">// String url = &#39;tel:&#39; + leaderPhone;</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;"> url </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;http://www.baidu.com&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">      </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">await</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">canLaunch</span><span style="color:#ABB2BF;">(url)){</span></span>
<span class="line"><span style="color:#ABB2BF;">         </span><span style="color:#C678DD;">await</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">launch</span><span style="color:#ABB2BF;">(url);</span></span>
<span class="line"><span style="color:#ABB2BF;">      } </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">         </span><span style="color:#C678DD;">throw</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;Could not launch $</span><span style="color:#E06C75;font-style:italic;">url</span><span style="color:#98C379;">&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"><span style="color:#ABB2BF;">   }</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Container</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">      child</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">InkWell</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">      onTap</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;">_launcherUrl,</span></span>
<span class="line"><span style="color:#ABB2BF;">      child</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Image</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">network</span><span style="color:#ABB2BF;">(leaderImage),</span></span>
<span class="line"><span style="color:#ABB2BF;">    ),</span></span>
<span class="line"><span style="color:#ABB2BF;">  );</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="flutter-easyrefresh" tabindex="-1"><a class="header-anchor" href="#flutter-easyrefresh" aria-hidden="true">#</a> flutter_easyrefresh</h2><p>上拉加载下拉刷新插件</p><h2 id="地图" tabindex="-1"><a class="header-anchor" href="#地图" aria-hidden="true">#</a> 地图</h2><h3 id="amap-location" tabindex="-1"><a class="header-anchor" href="#amap-location" aria-hidden="true">#</a> amap_location</h3><ol><li>在高德地图申请<code>APIkey</code> 获取<code>app</code>的<code>SHA1</code>值：</li></ol><div class="language-powershell line-numbers-mode" data-ext="powershell"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">keytool </span><span style="color:#56B6C2;">-</span><span style="color:#ABB2BF;">list </span><span style="color:#56B6C2;">-</span><span style="color:#ABB2BF;">v </span><span style="color:#56B6C2;">-</span><span style="color:#ABB2BF;">keystore debug.keystore</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>获取<code>PackageName</code>：<code>Andriod/app/build.gradle</code>里的<code>applicationId</code>值 2. 在<code>Andriod/app/build.gradle</code>里添加<code>amap_key</code></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#E06C75;">defaultConfig {</span></span>
<span class="line"><span style="color:#E06C75;">  …</span><span style="color:#ABB2BF;">.</span></span>
<span class="line"><span style="color:#E06C75;"> manifestPlaceholders </span><span style="color:#56B6C2;">=</span><span style="color:#E06C75;"> [</span></span>
<span class="line"><span style="color:#E06C75;">   AMAP_KEY </span><span style="color:#C678DD;">:</span><span style="color:#E06C75;"> </span><span style="color:#98C379;">&quot;xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&quot;</span><span style="color:#ABB2BF;">,</span><span style="color:#E06C75;"> </span><span style="color:#7F848E;font-style:italic;">/// 高德地图key</span></span>
<span class="line"><span style="color:#E06C75;"> ]</span></span>
<span class="line"><span style="color:#E06C75;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li><code>ios</code>配置在<code>main.dart</code>里</li></ol><div class="language-dart line-numbers-mode" data-ext="dart"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#C678DD;">void</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">main</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E5C07B;">AMapLocationClient</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">setApiKey</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&quot;xxxxxxxxxxxxxxxxxxxxx&quot;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#61AFEF;">runApp</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">MyApp</span><span style="color:#ABB2BF;">());</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在<code>ios/info.Plist</code>添加权限</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">&gt;NSLocationWhenInUseUsageDescription&lt;/</span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">string</span><span style="color:#ABB2BF;">&gt;需要用到定位&lt;/</span><span style="color:#E06C75;">string</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">&gt;UIBackgroundModes&lt;/</span><span style="color:#E06C75;">key</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">array</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">  &lt;</span><span style="color:#E06C75;">string</span><span style="color:#ABB2BF;">&gt;location&lt;/</span><span style="color:#E06C75;">string</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"><span style="color:#ABB2BF;">&lt;/</span><span style="color:#E06C75;">array</span><span style="color:#ABB2BF;">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>在需要使用的页面进行定位初始化</li></ol><div class="language-dart line-numbers-mode" data-ext="dart"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;">//初始化定位监听，</span></span>
<span class="line"><span style="color:#C678DD;">void</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">_initLocation</span><span style="color:#ABB2BF;">() </span><span style="color:#C678DD;">async</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">AMapLocationClient</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">startup</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">AMapLocationOption</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">desiredAccuracy</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">CLLocationAccuracy</span><span style="color:#ABB2BF;">.kCLLocationAccuracyHundredMeters));</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//监听坐标实时变换</span></span>
<span class="line"><span style="color:#E5C07B;">AMapLocationClient</span><span style="color:#ABB2BF;">.onLocationUpate.</span><span style="color:#61AFEF;">listen</span><span style="color:#ABB2BF;">((</span><span style="color:#E5C07B;">AMapLocation</span><span style="color:#ABB2BF;"> loc) {</span></span>
<span class="line"><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#56B6C2;">!</span><span style="color:#ABB2BF;">mounted) </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#61AFEF;">setState</span><span style="color:#ABB2BF;">(() {</span></span>
<span class="line"><span style="color:#ABB2BF;">lat </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> loc.latitude;</span></span>
<span class="line"><span style="color:#ABB2BF;">long </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> loc.longitude;</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span>
<span class="line"><span style="color:#E5C07B;">AMapLocationClient</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">startLocation</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>若运行后<code>lat</code>、<code>long</code>打印出来是<code>null</code>，去设置里查看下是否打开了定位权限 5. 最后在<code>dispose</code>关闭定位，防止内存泄漏</p><div class="language-dart line-numbers-mode" data-ext="dart"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#C678DD;">@override</span></span>
<span class="line"><span style="color:#C678DD;">void</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">dispose</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//注意这里关闭</span></span>
<span class="line"><span style="color:#E5C07B;">AMapLocationClient</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">shutdown</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#E5C07B;">super</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">dispose</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="amap-base" tabindex="-1"><a class="header-anchor" href="#amap-base" aria-hidden="true">#</a> amap_base</h3><ol><li>申请<code>APIkey</code></li><li>在<code>Android</code>配置<code>AndroidManifest.xml</code>设置<code>appKey</code></li></ol><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">&lt;</span><span style="color:#E06C75;">meta-data</span></span>
<span class="line"><span style="color:#D19A66;">android:name</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;com.amap.api.v2.apikey&quot;</span></span>
<span class="line"><span style="color:#D19A66;">android:value</span><span style="color:#ABB2BF;">=</span><span style="color:#98C379;">&quot;xxxxxxxx&quot;</span><span style="color:#ABB2BF;"> /&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在 IOS 上，<code>main.dart</code></p><div class="language-dart line-numbers-mode" data-ext="dart"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#C678DD;">void</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">main</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#E5C07B;">AMap</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">init</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;您的Key&#39;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#61AFEF;">runApp</span><span style="color:#ABB2BF;">(</span><span style="color:#C678DD;">new</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">MyApp</span><span style="color:#ABB2BF;">());</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>调用</li></ol><div class="language-dart line-numbers-mode" data-ext="dart"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#C678DD;">final</span><span style="color:#ABB2BF;"> _amapLocation </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">AMapLocation</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#C678DD;">var</span><span style="color:#ABB2BF;"> _result </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//初始化定位监听</span></span>
<span class="line"><span style="color:#C678DD;">void</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">_initLocation</span><span style="color:#ABB2BF;">() </span><span style="color:#C678DD;">async</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">_amapLocation.</span><span style="color:#61AFEF;">init</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#C678DD;">final</span><span style="color:#ABB2BF;"> options </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">LocationClientOptions</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">isOnceLocation</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">false</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">locatingWithReGeocode</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#C678DD;">await</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Permissions</span><span style="color:#ABB2BF;">().</span><span style="color:#61AFEF;">requestPermission</span><span style="color:#ABB2BF;">()) {</span></span>
<span class="line"><span style="color:#ABB2BF;">_amapLocation.</span><span style="color:#61AFEF;">startLocate</span><span style="color:#ABB2BF;">(options).</span><span style="color:#61AFEF;">listen</span><span style="color:#ABB2BF;">((_) =&gt; </span><span style="color:#61AFEF;">setState</span><span style="color:#ABB2BF;">(() {</span></span>
<span class="line"><span style="color:#ABB2BF;">_result </span><span style="color:#56B6C2;">=</span></span>
<span class="line"><span style="color:#98C379;">&#39;坐标：\${</span><span style="color:#E06C75;font-style:italic;">_</span><span style="color:#98C379;">.</span><span style="color:#E06C75;font-style:italic;">longitude</span><span style="color:#98C379;">}，\${</span><span style="color:#E06C75;font-style:italic;">_</span><span style="color:#98C379;">.</span><span style="color:#E06C75;font-style:italic;">latitude</span><span style="color:#98C379;">} @ \${</span><span style="color:#E5C07B;">DateTime</span><span style="color:#98C379;">.</span><span style="color:#61AFEF;">now</span><span style="color:#98C379;">().</span><span style="color:#E06C75;font-style:italic;">hour</span><span style="color:#98C379;">}:\${</span><span style="color:#E5C07B;">DateTime</span><span style="color:#98C379;">.</span><span style="color:#61AFEF;">now</span><span style="color:#98C379;">().</span><span style="color:#E06C75;font-style:italic;">minute</span><span style="color:#98C379;">}:\${</span><span style="color:#E5C07B;">DateTime</span><span style="color:#98C379;">.</span><span style="color:#61AFEF;">now</span><span style="color:#98C379;">().</span><span style="color:#E06C75;font-style:italic;">second</span><span style="color:#98C379;">}&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">}));</span></span>
<span class="line"><span style="color:#ABB2BF;">} </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#61AFEF;">setState</span><span style="color:#ABB2BF;">(() {</span></span>
<span class="line"><span style="color:#ABB2BF;">_result </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;无定位权限&quot;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>关闭定位</li></ol><div class="language-dart line-numbers-mode" data-ext="dart"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#C678DD;">@override</span></span>
<span class="line"><span style="color:#C678DD;">void</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">dispose</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">//注意这里关闭</span></span>
<span class="line"><span style="color:#ABB2BF;">_amapLocation.</span><span style="color:#61AFEF;">stopLocate</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#E5C07B;">super</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">dispose</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="获取调试-sha1" tabindex="-1"><a class="header-anchor" href="#获取调试-sha1" aria-hidden="true">#</a> 获取调试 sha1</h3><div class="language-powershell line-numbers-mode" data-ext="powershell"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#56B6C2;">//</span><span style="color:#ABB2BF;"> Windows终端</span></span>
<span class="line"><span style="color:#ABB2BF;">keytool </span><span style="color:#56B6C2;">-</span><span style="color:#ABB2BF;">exportcert </span><span style="color:#56B6C2;">-</span><span style="color:#ABB2BF;">list </span><span style="color:#56B6C2;">-</span><span style="color:#ABB2BF;">v </span><span style="color:#56B6C2;">-</span><span style="color:#ABB2BF;">alias androiddebugkey </span><span style="color:#56B6C2;">-</span><span style="color:#ABB2BF;">keystore </span><span style="color:#56B6C2;">%</span><span style="color:#ABB2BF;">USERPROFILE</span><span style="color:#56B6C2;">%</span><span style="color:#ABB2BF;">\\.android\\debug.keystore</span></span>
<span class="line"><span style="color:#56B6C2;">//</span><span style="color:#ABB2BF;"> Mac</span><span style="color:#56B6C2;">/</span><span style="color:#ABB2BF;">Linux终端</span></span>
<span class="line"><span style="color:#ABB2BF;">keytool </span><span style="color:#56B6C2;">-</span><span style="color:#ABB2BF;">exportcert </span><span style="color:#56B6C2;">-</span><span style="color:#ABB2BF;">list </span><span style="color:#56B6C2;">-</span><span style="color:#ABB2BF;">v \\</span></span>
<span class="line"><span style="color:#56B6C2;">-</span><span style="color:#ABB2BF;">alias androiddebugkey </span><span style="color:#56B6C2;">-</span><span style="color:#ABB2BF;">keystore ~</span><span style="color:#56B6C2;">/</span><span style="color:#ABB2BF;">.android</span><span style="color:#56B6C2;">/</span><span style="color:#ABB2BF;">debug.keystore</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="截图保存到本机" tabindex="-1"><a class="header-anchor" href="#截图保存到本机" aria-hidden="true">#</a> 截图保存到本机</h2><div class="language-dart line-numbers-mode" data-ext="dart"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;package:image_picker_saver/image_picker_saver.dart&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#C678DD;">import</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;dart:typed_data&#39;</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">….</span></span>
<span class="line"><span style="color:#E5C07B;">GlobalKey</span><span style="color:#ABB2BF;"> _rootWidgetKey </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">GlobalKey</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// 截图</span></span>
<span class="line"><span style="color:#C678DD;">void</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">_capturePng</span><span style="color:#ABB2BF;">() </span><span style="color:#C678DD;">async</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#C678DD;">try</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#E5C07B;">RenderRepaintBoundary</span><span style="color:#ABB2BF;"> boundary </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> _rootWidgetKey.currentContext.</span><span style="color:#61AFEF;">findRenderObject</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#C678DD;">var</span><span style="color:#ABB2BF;"> image </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">await</span><span style="color:#ABB2BF;"> boundary.</span><span style="color:#61AFEF;">toImage</span><span style="color:#ABB2BF;">(pixelRatio</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">3.0</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#E5C07B;">ByteData</span><span style="color:#ABB2BF;"> byteData </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">await</span><span style="color:#ABB2BF;"> image.</span><span style="color:#61AFEF;">toByteData</span><span style="color:#ABB2BF;">(format</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">ImageByteFormat</span><span style="color:#ABB2BF;">.png);</span></span>
<span class="line"><span style="color:#E5C07B;">Uint8List</span><span style="color:#ABB2BF;"> pngBytes </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> byteData.buffer.</span><span style="color:#61AFEF;">asUint8List</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#E5C07B;">ImagePickerSaver</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">saveFile</span><span style="color:#ABB2BF;">(fileData</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> pngBytes).</span><span style="color:#61AFEF;">then</span><span style="color:#ABB2BF;">((path) {</span></span>
<span class="line"><span style="color:#61AFEF;">setState</span><span style="color:#ABB2BF;">(() {</span></span>
<span class="line"><span style="color:#ABB2BF;">_cImg </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> path;</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span>
<span class="line"><span style="color:#ABB2BF;">});</span></span>
<span class="line"><span style="color:#ABB2BF;">} </span><span style="color:#C678DD;">catch</span><span style="color:#ABB2BF;"> (e) {</span></span>
<span class="line"><span style="color:#61AFEF;">print</span><span style="color:#ABB2BF;">(e);</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">RepaintBoundary</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">key</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> _rootWidgetKey,</span></span>
<span class="line"><span style="color:#ABB2BF;">child</span><span style="color:#C678DD;">:</span><span style="color:#61AFEF;">_card</span><span style="color:#ABB2BF;">(),</span></span>
<span class="line"><span style="color:#ABB2BF;">),</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">Image</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">memory</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">pngBytes,</span></span>
<span class="line"><span style="color:#ABB2BF;">fit</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">BoxFit</span><span style="color:#ABB2BF;">.cover,</span></span>
<span class="line"><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="监听滑动并显示隐藏顶部" tabindex="-1"><a class="header-anchor" href="#监听滑动并显示隐藏顶部" aria-hidden="true">#</a> 监听滑动并显示隐藏顶部</h2><p>移除顶部<code>padding</code>，监听滚动，在滚动值不为<code>0</code>且只监听第一个<code>Weiget</code>时，调用方法更改透明度</p><div class="language-dart line-numbers-mode" data-ext="dart"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#E5C07B;">Scaffold</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;"> body</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">MediaQuery</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">removePadding</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">  removeTop</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">true</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">  context</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> context,</span></span>
<span class="line"><span style="color:#ABB2BF;">  child</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Stack</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">  children</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">&lt;</span><span style="color:#E5C07B;">Widget</span><span style="color:#56B6C2;">&gt;</span><span style="color:#ABB2BF;">[</span></span>
<span class="line"><span style="color:#ABB2BF;">   </span><span style="color:#E5C07B;">NotificationListener</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">    onNotification</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> (scrollNotification){</span></span>
<span class="line"><span style="color:#ABB2BF;">     </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;">(scrollNotification is </span><span style="color:#E5C07B;">ScrollUpdateNotification</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">&amp;&amp;</span><span style="color:#ABB2BF;"> scrollNotification.depth </span><span style="color:#56B6C2;">==</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">){</span></span>
<span class="line"><span style="color:#ABB2BF;">       </span><span style="color:#61AFEF;">_onScroll</span><span style="color:#ABB2BF;">(scrollNotification.metrics.pixels);</span></span>
<span class="line"><span style="color:#ABB2BF;">      }</span></span>
<span class="line"><span style="color:#ABB2BF;">     },</span></span>
<span class="line"><span style="color:#ABB2BF;">     child</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">ListView</span><span style="color:#ABB2BF;">(),</span></span>
<span class="line"><span style="color:#ABB2BF;">    ),</span></span>
<span class="line"><span style="color:#ABB2BF;">     </span><span style="color:#E5C07B;">Opacity</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">      opacity</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> _appBarAlpha,</span></span>
<span class="line"><span style="color:#ABB2BF;">      child</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Container</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">      height</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">80</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">      decoration</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">BoxDecoration</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">       color</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Colors</span><span style="color:#ABB2BF;">.white,</span></span>
<span class="line"><span style="color:#ABB2BF;">      ),</span></span>
<span class="line"><span style="color:#ABB2BF;">     ),</span></span>
<span class="line"><span style="color:#ABB2BF;">    )</span></span>
<span class="line"><span style="color:#ABB2BF;">   ],</span></span>
<span class="line"><span style="color:#ABB2BF;">  )</span></span>
<span class="line"><span style="color:#ABB2BF;"> ),</span></span>
<span class="line"><span style="color:#ABB2BF;">);</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,69),o=[e];function B(c,r){return n(),a("div",null,o)}const y=s(p,[["render",B],["__file","组件.html.vue"]]);export{y as default};
